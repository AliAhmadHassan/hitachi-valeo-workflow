<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="templates/master.xhtml">
	<ui:define name="header">
		 Pedidos para Aprovação
	</ui:define>
	<ui:define name="content">
		<h:form id="form" name="form" prependId="false">

			<p:spacer height="30px" />
			<p:growl id="msgs" showDetail="true" />

			<p:dataTable id="recordsTable" var="record"
				value="#{pedidosBean.records}">

				<p:column headerText="material" style="font-weight:bold">
					<h:outputText value="#{record.material}" />
				</p:column>

				<p:column headerText="qtdVendas" style="font-weight:bold">
					<h:outputText value="#{record.qtdVendas}" />
				</p:column>

				<p:column headerText="volume" style="font-weight:bold">
					<h:outputText value="#{record.volume}" />
				</p:column>

				<p:column headerText="cod." style="font-weight:bold">
					<h:outputText value="#{record.idSAP}" />
				</p:column>

				<p:column style="font-weight:bold;width:16px;text-align:center">
				<!-- 	<h:commandLink action="pedidoDetalhado.xhtml" target="_new">
						<f:setPropertyActionListener value="#{record}"
							target="#{pedidosBean.record}" />
						<img src="static/images/editIcon16.png"
							style="padding-right: 5px;" />

					</h:commandLink>
					 -->
					 
					 				<p:commandLink update=":form:PedidoDetalhadoPanelAlter"
					oncomplete="PF('dlgPedidoDetalhado').show()">
					<f:setPropertyActionListener value="#{record}"
							target="#{pedidosBean.record}" />
						<img src="static/images/editIcon16.png"
							style="padding-right: 5px;" />

				</p:commandLink>
				</p:column>

			</p:dataTable>


			<p:dialog id="dlgPedidoDetalhado" closeOnEscape="true" header="Cadastro Usuario"
				widgetVar="dlgPedidoDetalhado" modal="true" width="960">
				<p:outputPanel id="PedidoDetalhadoPanelAlter"
					style="overflow-x: hidden; overflow-y: hidden;">

			<table style="width: 100%">
				<tr>
					<td><img src="static/images/logocin.png"
						style="padding-right: 5px;" /></td>
					<td>&nbsp;</td>
					<td style="text-align: right; width: 250px;"><div style="font-size: x-large; font-weight: bold;">Aprovação
							de Desconto</div>
							<h:outputText value="#{pedidosBean.agora}">
    <f:convertDateTime pattern="MM/dd/yyyy"/>
</h:outputText></td>
				</tr>
			</table>
			<hr />
			<table>
				<tr>
					<td><b>Material: </b></td>
					<td><h:outputLabel value="#{pedidosBean.record.material}" /></td>
				</tr>
				<tr>
					<td><b>Descrição: </b></td>
					<td><h:outputLabel
							value="#{pedidosBean.record.descricaoMaterial}" /></td>
				</tr>

			</table>
			<hr />
			<table style="width: 100%">
				<tr>
					<td style="font-weight: bold;">Qtd. de Vendas</td>
					<td style="font-weight: bold;">Valor Vendas</td>
					<td style="font-weight: bold;">Preço Médio</td>
					<td style="font-weight: bold;">Preço Atual</td>
				</tr>
				<tr>
					<td><h:outputLabel value="#{pedidosBean.record.qtdVendas}" /></td>
					<td><h:outputLabel value="#{pedidosBean.record.valorVendas}" /></td>
					<td><h:outputLabel value="#{pedidosBean.record.precoMedio}" /></td>
					<td><h:outputLabel value="#{pedidosBean.record.precoAtual}" /></td>
				</tr>
			</table>
			<hr />
			<table style="width: 100%">
				<tr>
					<td style="font-weight: bold;">Volume</td>
					<td style="font-weight: bold;">Desconto</td>
					<td style="font-weight: bold;">Período de vigência do desconto</td>
					<td style="font-weight: bold;">GROSS MARGIN</td>
				</tr>
				<tr>
					<td><h:outputLabel value="#{pedidosBean.record.volume}" /></td>
					<td><h:outputLabel value="#{pedidosBean.record.desconto}" /></td>
					<td>de <h:outputLabel value="#{pedidosBean.record.periodoDe}">
							<f:convertDateTime pattern="dd/MM/yyyy" />
						</h:outputLabel> ate <h:outputLabel value="#{pedidosBean.record.periodoAte}">
							<f:convertDateTime pattern="dd/MM/yyyy" />
						</h:outputLabel></td>
					<td><h:outputLabel value="#{pedidosBean.record.grossMargin}" /></td>
				</tr>
			</table>
			<hr />
			<table style="width: 100%">
				<tr>
					<td>
						<table>
							<tr>
								<td style="font-weight: bold; padding-right: 50px">%DCOS</td>
								<td><h:outputLabel value="#{pedidosBean.record.percDCOS}" /></td>
							</tr>
							<tr>
								<td style="font-weight: bold; padding-right: 50px">%Bonus</td>
								<td><h:outputLabel value="#{pedidosBean.record.percBonus}" /></td>
							</tr>
							<tr>
								<td style="font-weight: bold; padding-right: 50px">%Fees</td>
								<td><h:outputLabel value="#{pedidosBean.record.percFees}" /></td>
							</tr>
							<tr>
								<td style="font-weight: bold; padding-right: 50px">%Extra</td>
								<td><h:outputLabel value="#{pedidosBean.record.percExtra}" /></td>
							</tr>
						</table>

					</td>
					<td>
						<table>
							<tr>
								<td colspan="1" style="font-weight: bold; text-align: center;">OPERATING
									MARGIN</td>
							</tr>
							<tr>
								<td><h:outputLabel
										value="#{pedidosBean.record.operatingMarginValor}" /></td>
								<td><h:outputLabel
										value="#{pedidosBean.record.operatingMarginPerc}" /></td>
							</tr>
						</table>

					</td>
				</tr>
			</table>
			<hr />
			<table>
				<tr>
					<td style="font-weight: bold;">Motivo:</td>
					<td><h:outputLabel value="#{pedidosBean.record.motivo}" /></td>
				</tr>
			</table>
			<hr />
			<p:panel style="background-color: #c5e0b4" >
				<table style="width: 100%; ">
					<tr>
						<td style="padding-left: 200px;"><p:commandButton value="Aprovado"
								action="#{pedidosBean.aprovado}" update="@form" /></td>
						<td style="padding-right: 200px; text-align: right;"><p:commandButton value="Negado"
								action="#{pedidosBean.negado}" update="@form"/></td>
					</tr>
				</table>
			</p:panel>
				</p:outputPanel>
			</p:dialog>



		</h:form>


	</ui:define>
	<ui:define name="footer">
	</ui:define>
</ui:composition>
</html>